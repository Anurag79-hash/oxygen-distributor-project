<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="/css/styles.css">
  </head>
  <body>
    <div>
    <%- include('partials/header') %>
    
    <div class="container" >
      <div class="subcontainer" id="loginBox">
  <h1 data-i18n="login"></h1>
  
  <% if (typeof error !== 'undefined' && error) { %>
    <p class="msg error"><%= error %></p>
  <% } %>

  <% if (typeof success !== 'undefined' && success) { %>
    <p class="msg success"><%= success %></p>
  <% } %>
  <form action="/api/login" method="POST">
    <input type="email" name="email" data-i18n-placeholder="email"  required /><br>
    <input type="password" name="password" data-i18n-placeholder="password" required /><br>
    <button type="submit" data-i18n="loginBtn"></button>
  </form>
  <!-- id="showForgot" -->
    <p><a href="#" data-i18n="forgot"></a></p>
   <p>
  <span data-i18n="noAccount"></span>
  <a href="/register" data-i18n="register"></a>
</p>
</div> 
</div></div>
<!-- Forgot Password Form (Step 1: Enter Email) -->
<div id="forgotBox" class="hidden box">
  <h2>Forgot Password</h2>
  <form action="/api/send-otp" method="POST">
    <input type="email" name="email" placeholder="Enter Email" required /><br>
    <button type="submit">Send OTP</button>
  </form>
  <p><a href="#" id="backToLogin">Back to Login</a></p>
</div>

<!-- OTP Verification Form (Step 2: Enter OTP) -->
<div id="otpBox" class="hidden box">
  <h2>Verify OTP</h2>
  <form action="/api/verify-otp" method="POST">
    <input type="hidden" name="email" id="otpEmail">
    <input type="text" name="otp" placeholder="Enter OTP" required /><br>
    <button type="submit">Verify</button>
  </form>
</div>

<!-- Reset Password Form (Step 3: Reset Password) -->
<div id="resetBox" class="hidden box">
  <h2>Reset Password</h2>
  <form action="/api/reset-password-otp" method="POST">
    <input type="hidden" name="email" id="resetEmail">
    <input type="password" name="password" placeholder="New Password" required /><br>
    <button type="submit">Reset Password</button>
  </form>
</div>

<%- include('partials/footer') %>
<script>
  document.getElementById("showForgot").onclick = () => {
    document.getElementById("loginBox").classList.add("hidden");
    document.getElementById("forgotBox").classList.remove("hidden");
  };

  document.getElementById("backToLogin").onclick = () => {
    document.getElementById("forgotBox").classList.add("hidden");
    document.getElementById("loginBox").classList.remove("hidden");
  };
</script>

</body>
</html>

